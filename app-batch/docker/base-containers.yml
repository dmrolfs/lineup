version: '3'

services:

  # Avoids duplicating common Cassandra configuration for each node
  cassandra-base:
    image: cassandra:3
    networks:
        - dockernet
    environment:
        WAIT_TIMEOUT: "60"
        JVM_OPTS: "-Dcassandra.consistent.rangemovement=false"
        CASSANDRA_CLUSTER_NAME: "SpotlightCluster"
        CASSANDRA_ENDPOINT_SNITCH: "GossipingPropertyFileSnitch"
        CASSANDRA_DC: "DATA"
    restart: always # Sometimes it starts too fast, cheap way of retrying...

  data:
    image: gliderlabs/alpine
    command: echo Data Container
    user: 999:999
    labels:
      spotlight.role: "Volume Container"
